<div id="page-wrapper">
  <div class="row">
    <div class="col-lg-12">
      <h1 class="page-header">Nos Utilisateurs</h1>
    </div>
    <!-- /.col-lg-12 -->
  </div>
  <!-- /.row -->
  <div class="row">
    <div class="col-lg-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          Gestion des utilisateurs
        </div>
        <!-- /.panel-heading -->
        <div class="panel-body">
          <% if flash[:success] %>
            <div class="alert alert-success">
              <%= flash[:success] %>
            </div>
            <% end %>
              <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-example">
                <thead>
                  <tr>
                    <th>Nom d'utilisateur</th>
                    <th>Prénom(s)</th>
                    <th>Nom(s)</th>
                    <th>Email</th>
                    <th>Panier</th>
                    <th>Supression</th>
                    <th>edit</th>
                    <th>Voir</th>
                  </tr>
                </thead>
                <tbody>
                  <% for index_user in 0 ... @all_users.size%>
                    <tr class="odd gradeX">
                      <td>
                        <%= @all_users[index_user].username %>
                      </td>
                      <td>
                        <%= @all_users[index_user].first_name %>
                      </td>
                      <td>
                        <%= @all_users[index_user].last_name %>
                      </td>
                      <td>
                        <%= @all_users[index_user].email %>
                      </td>
                      <td class="center">
                        <%= @all_users[index_user].cart_id %>
                      </td>
                      <td class="center">
                        <%= link_to admin_site_user_path(@all_users[index_user].id), method: :delete,:data => {confirm: 'Are you sure?'}, class:"btn" do %>
                          <%= content_tag :i,'' , class:"fa fa-trash" %>
                            <% end %>
                      </td>
                      <td class="center">
                        <%= link_to admin_site_user_path(@all_users[index_user].id), class:"btn" do %>
                          <%= content_tag :i,'' , class:"fa fa-edit" %>
                            <% end %>
                      </td>
                      <td class="center">
                        <button data-toggle="modal" data-target="#myModal<%= @all_users[index_user].id %>">
                          <i class="fa fa-eye" aria-hidden="true"></i>
                      </button>
                      </td>
                    </tr>
                    <div class="modal fade" id="myModal<%= @all_users[index_user].id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                      <div class="modal-dialog">
                        <div class="modal-content">
                          <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                            <h4 class="modal-title" id="myModalLabel">
                              Utilisateur n°
                              <%= @all_users[index_user].id %>
                            </h4>
                          </div>
                          <div class="modal-body">
                            <div class="row">
                              <div class="col-md-4">
                                <% if @all_users[index_user].avatar.attached? %>
                                  <%= image_tag( @all_users[index_user].avatar,height:200) %>
                                    <% else %>
                                      <%= image_tag gravatar_image_url( @all_users[index_user].email, width: 200, height:200) %>
                                        <% end %>
                              </div>
                              <div class="col-md-6">
                                <label>Nom d'utilisateur:</label>
                                <%= @all_users[index_user].username %><br>
                                  <label>Email:</label>
                                  <%= @all_users[index_user].email %><br>
                                    <label>Prénom (s):</label>
                                    <%= @all_users[index_user].first_name %><br>
                                      <label>Nom (s):</label>
                                      <%= @all_users[index_user].last_name %><br>
                                        <label>Numero de panier:</label>
                                        <%= @all_users[index_user].cart_id %><br>
                              </div>
                            </div>
                          </div>
                          <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary">Save changes</button>
                          </div>
                        </div>
                        <!-- /.modal-content -->
                      </div>
                      <!-- /.modal-dialog -->
                    </div>
                    <% end %>
                </tbody>
              </table>
        </div>
        <!-- /.panel-body -->
      </div>
      <!-- /.panel -->
    </div>
    <!-- /.col-lg-12 -->
  </div>
  <!-- /.row -->

</div>
<!-- /#page-wrapper -->
</div>
<!-- /#wrapper -->
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
<script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap.min.js"></script>
<script>
  $(document).ready(function() {
    $('#dataTables-example').DataTable({
      responsive: true
    });
  });
</script>